<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embers'23</title>

    <link rel="stylesheet" href="../css/event.css">

</head>

<body>
    <div class="loading">
        <div class="spinner"></div>
    </div>



    <div class="formcontainer">

        <form class="form" method="POST" name="google-sheet">
            <h1>Project Exhibition Registeration </h1>
            <br>
            <span>
                <label for="team">College Name:</label>
                <input type="text" class="inputfield" id="team" name="CollegeName" placeholder="Enter your College name*"
                    required></span>
            <span>
            <span>
                <label for="team">Team Name:</label>
                <input type="text" class="inputfield" id="team" name="teamName" placeholder="Team Name*"
                    required></span>
            <span>

                <label for="team">Team Leader Name:</label>
                <input type="text" class="inputfield" id="leaderName" name="leaderName" placeholder="Team Leader Name*"
                    required></span>
            <span>
                <label for="team"> Email:</label>
                <input type="email" class="inputfield" id="email" name="Email" placeholder="Email*" required></span>
            <span>
                <label for="phone">Phone Number:</label>
                <input type="text" class="inputfield" id="phone" name="Phone" placeholder="Phone Number*"
                    required></span>
            <span>
                <span>
                    <label for="team">Member 2 full name:</label>
                    <input type="text" class="inputfield" id="team" name="member2" placeholder="Member 2 name"></span>
                <span>
                    <label for="team">Member 3 full name:</label>
                    <input type="text" class="inputfield" id="team" name="member3" placeholder="Member 3 name"></span>
                <span>
                    <label for="team">Member 4 full name:</label>
                    <input type="text" class="inputfield" id="team" name="member4" placeholder="Member 4 name"></span>
                <span>



                    <label for="title">Project Title</label>
                    <input type="text" class="inputfield" id="title" name="P_title"
                        placeholder="Enter your Project Title" required>
                </span>
                <span>
                    <label for="idea">What is your project idea?</label>
                    <textarea class="inputfield" name="P_idea" id="idea" placeholder="Please describe your project idea"
                        cols="30" rows="4"></textarea>
                </span>
                <span>
                    <label for="challenge">What challenges does it overcome?</label>
                    <textarea class="inputfield" name="p_challenges" id="challenge"
                        placeholder="Please describe the challenges this solution can address" cols="30"
                        rows="4"></textarea>
                </span>
                <span><label for="requirements">What are the requirements needed in college?</label>
                    <input type="text" class="inputfield" id="requirements" name="Requirements"
                        placeholder="Examples: power outlet, Wi-Fi, desk space" required></span>
                <span>
                    <span>
                        <label for="tid">Transaction ID:</label>
                        <input type="text" class="inputfield" id="tid" name="transactionId"
                            placeholder="Transaction ID*" required></span>

                    <!--------------QR Code--------------->


                    <span>
                        <div class="qr">
                            <img src="./payment.jpeg" alt="">
                        </div>
                    </span>
                    <span>
                        <input type="hidden" class="inputfield" id="datetime" name="date_time"></span>

                    <br>
                    <span class="submitspan"><input class="submit" type="submit" value="Submit" name="submit">
                    </span>
        </form>
    </div>
    <div class="issue">
        <p>Having issues?</p>
        <a href="https://wa.me/+916361557581?text=*issue%20related%20to%20Embers'23%20registration*%0D%0A%0D%0ADescribe%20your%20issue:">Contact us</a>
    </div>
    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzwZzTJyPD2hBsJ6HFyeXzJcND15La3Ex8Ga9tdtUPiHJbh_5CdQ83_YxQ-r_lSyu5e/exec'
        const form = document.forms['google-sheet']

        // Add a reference to the loading element
        const loading = document.querySelector('.loading');

        // Add an event listener to the form submit button
        form.addEventListener('submit', e => {
            e.preventDefault();

            // Show the loading animation
            loading.style.display = 'block';

            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then(response => {
                    // Hide the loading animation
                    loading.style.display = 'none';
                    alert("Thank you for registering! We have received your registration and will send you a confirmation email shortly. ");
                form.reset();
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    // Hide the loading animation
                    loading.style.display = 'none';
                });
        });





        const datetimeField = form.querySelector('#datetime');

        // Get current date and time
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        datetimeField.value = `${hours}:${minutes} | ${day}-${month}-${year} `;

    </script>
</body>

</html>
